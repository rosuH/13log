# 指定语言环境
language: node_js
# 指定需要sudo权限
sudo: required
# 指定node_js版本
node_js:
  - 10.8.0
# 指定缓存模块，可选。缓存可加快编译速度。
cache:
  directories:
    - node_modules

branches:
  only:
    - hexo

before_install:
  - npm install -g hexo-cli
  - npm install -g firebase-tools

# Start: Build Lifecycle
install:
  - npm install

script:
  - hexo clean
  - hexo generate

  # 接下来是部署到 Firebase Hosting 的配置信息
deploy:
  # 默认在部署前会把整个目录恢复到刚拷贝时的状态，但是我们需要上面生成好的文件，故跳过该阶段
  skip_cleanup: true

  # Travis CI 预置了发布到 firebase 的配置
  provider: firebase
  
  # 配置 Firebase 的用户验证和工程信息，下文会提到
  token:
    secure: $FIREBASE_TOKEN
  project: $FIREBASE_PROJECT

# End: Build LifeCycle

